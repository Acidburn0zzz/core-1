module "Core"

args =
  bridge: new GuideGuideHTMLBridge({testMode: true})
  messages: new GuideGuideMessages "en_us"

gg = new GuideGuideCore(args)

asyncTest "can init", ->
  new GuideGuideCore args, (args) ->
    ok args.bridge, "no bridge given"
    ok args.bridge, "no messages object given"
    start()

test "can log", ->
  equal gg.log("foo"), "foo"

test "can create button object", ->
  propEqual gg.button("Ok","foo",true), {label:"Ok", callback: "foo", primary: true}

test "can open url", ->
  equal gg.openURL("http://foo.com"), "http://foo.com"

test "can toggle guides", ->
  equal gg.toggleGuides(), true

test "can add top quick guide", ->
  equal gg.quickGuide("top"), "|~(hp)"

test "can add horizontal midpoint quick guide", ->
  equal gg.quickGuide("horizontalMidpoint"), "~|~(hp)"

test "can add bottom quick guide", ->
  equal gg.quickGuide("bottom"), "~|(hp)"

test "can add left quick guide", ->
  equal gg.quickGuide("left"), "|~(vp)"

test "can add vertical midpoint quick guide", ->
  equal gg.quickGuide("verticalMidpoint"), "~|~(vp)"

test "can add right quick guide", ->
  equal gg.quickGuide("right"), "~|(vp)"

test "can donate", ->
  equal gg.donate(), "http://guideguide.me/donate"

test "can save data", ->
  equal gg.saveData().application.name, "GuideGuide web"

asyncTest "can check for updates", ->
  gg.checkForUpdates (data) =>
    equal $.type(data), "object"
    start()
