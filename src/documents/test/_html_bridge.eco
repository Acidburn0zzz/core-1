module "HTMLBridge"

testBridge = new GuideGuideHTMLBridge({testMode: true})

test "has necessary methods", ->
  expect 17
  ok testBridge.getData
  ok testBridge.setData
  ok testBridge.addGuides
  ok testBridge.toggleGuides
  ok testBridge.resetGuides
  ok testBridge.getDocumentInfo
  ok testBridge.localizeUI
  ok testBridge.log
  ok testBridge.error
  ok testBridge.openURL
  ok testBridge.toHash
  ok testBridge.alert
  ok testBridge.dismissAlert
  ok testBridge.showLoader
  ok testBridge.hideLoader
  ok testBridge.refreshSets
  ok testBridge.onSettingsUpdate

test "can log", ->
  equal testBridge.log("foo"), "foo"

test "can alert", ->
  alert =
    title: "Test alert"
    message: "This is a test alert"
    buttons: [
      callback: "testCallback"
      label: "Test button"
      primary: false
    ]
  equal $.type(testBridge.alert(alert)), "object"

test "can get data", ->
  equal $.type(testBridge.getData()), "object"

test "can set data", ->
  equal $.type(testBridge.setData({foo: "bar"})), "object"

test "can get document info", ->
  equal $.type(testBridge.getDocumentInfo()), "object"

test "can open url", ->
  equal testBridge.openURL("http://foo.com"), "http://foo.com"

test "can toggle guides", ->
  equal testBridge.toggleGuides(), true

test "can show update indicator", ->
  equal $.type(testBridge.showUpdateIndicator({hasUpdate: false})), "object"

test "can refresh sets", ->
  sets =
    Default:
      name: "Default"
      sets:
        "469eb8921edf75ed3360d5838f9585c0d7a82109":
          name: "Outline"
          string: "| ~ | (vFl)\n| ~ | (hFl)"
          id: "469eb8921edf75ed3360d5838f9585c0d7a82109"

  equal $.type(testBridge.refreshSets(sets), "object"
